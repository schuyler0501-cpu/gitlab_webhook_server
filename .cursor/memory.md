# 用户记忆和偏好

这个文件保存了用户的重要指令、偏好设置和项目特定要求。AI 在每次对话时都会参考这个文件。

## 📝 重要指令

### 代码风格偏好

- 使用中文注释
- 函数长度不超过 50 行
- 优先使用结构化日志（zap）
- 错误处理必须包含上下文信息

### 开发习惯

- 新功能先写测试，再实现
- 提交代码前必须运行 `make lint` 和 `make test`
- 使用表驱动测试
- 代码审查时关注错误处理和日志记录

## 🎯 项目特定要求

### Webhook 处理

- 所有 Webhook 事件必须记录日志
- Token 验证是必须的（如果配置了）
- 错误响应要包含足够的调试信息

### 数据模型

- CommitRecord 必须包含完整的提交信息
- 时间字段使用 RFC3339 格式
- 所有模型字段都要有 JSON tag

## 💡 常用模式

### 添加新功能的标准流程

1. 在 `internal/model/` 定义数据模型
2. 在 `internal/service/` 实现业务逻辑
3. 在 `internal/handler/` 创建 HTTP 处理器
4. 在 `internal/router/` 注册路由
5. 编写单元测试

### 错误处理模式

```go
if err != nil {
    logger.Error("操作描述",
        zap.Error(err),
        zap.String("上下文", "值"),
    )
    return fmt.Errorf("操作描述: %w", err)
}
```

## 🚫 禁止事项

- 不要在 handler 中直接操作数据库
- 不要忽略错误（使用 `_` 忽略）
- 不要在日志中输出敏感信息
- 不要使用全局变量（除了配置和日志）

## 📌 待办事项

- [ ] 添加数据库持久化支持
- [ ] 实现统计查询 API
- [ ] 添加更多 Webhook 事件处理

## 🔄 更新记录

### 2024-01-XX

- 初始创建记忆文件
- 记录基本偏好和项目要求

---

**提示**: 定期更新这个文件，记录重要的对话内容和决策。
