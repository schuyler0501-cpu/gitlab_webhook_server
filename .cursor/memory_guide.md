# 记忆系统使用指南

## 📖 什么是记忆系统？

记忆系统是一个让 AI 记住你的重要指令、偏好和项目特定要求的机制。通过 `.cursor/memory.md` 文件，AI 可以在每次对话时参考你的偏好，生成更符合你期望的代码。

## 🎯 为什么需要记忆系统？

1. **一致性**: 确保 AI 生成的代码始终符合你的偏好
2. **效率**: 不需要每次都重复说明你的要求
3. **准确性**: AI 能更好地理解你的项目特定需求
4. **个性化**: 让 AI 适应你的开发习惯

## 📁 文件结构

```
.cursor/
├── memory.md              # 主记忆文件（重要！）
├── memory_template.md      # 记忆模板
├── save_memory.md          # 保存记忆的指南
└── memory_guide.md         # 本文件
```

## 🚀 快速开始

### 1. 查看当前记忆

打开 `.cursor/memory.md` 文件，查看已保存的记忆。

### 2. 添加新记忆

#### 方法 A: 直接告诉 AI

在对话中说：
```
请将以下内容保存到记忆文件中：
- 我偏好使用中文注释
- 所有错误处理都要包含上下文信息
- 新功能必须先写测试
```

#### 方法 B: 使用记忆命令

```
@memory 保存: 我偏好使用表驱动测试，所有测试函数都要使用这个模式
```

#### 方法 C: 手动编辑

直接编辑 `.cursor/memory.md` 文件。

### 3. 更新记忆

```
@memory 更新: 将"函数长度不超过 50 行"改为"函数长度不超过 80 行"
```

### 4. 查看记忆

```
@memory 查看: 我的代码风格偏好是什么？
```

## 📝 应该保存什么？

### ✅ 推荐保存

1. **代码风格偏好**
   - 注释语言（中文/英文）
   - 命名风格
   - 代码格式偏好

2. **开发习惯**
   - 测试优先/实现优先
   - 代码审查关注点
   - Git 提交习惯

3. **项目特定要求**
   - 业务规则
   - 技术决策
   - 架构约束

4. **常用代码模式**
   - 错误处理模式
   - 日志记录模式
   - 测试模式

5. **禁止事项**
   - 明确不允许的做法
   - 反模式

### ❌ 不推荐保存

- 临时性的问题
- 一次性的代码片段
- 已经解决的问题
- 过于具体的实现细节

## 💡 使用示例

### 示例 1: 保存代码风格偏好

**对话**:
```
用户: @memory 保存: 我偏好使用中文注释，所有公开函数必须有中文注释说明功能

AI: ✅ 已保存到记忆文件。以后生成代码时，我会确保所有公开函数都有中文注释。
```

### 示例 2: 保存项目要求

**对话**:
```
用户: @memory 保存: Webhook 处理要求 - 所有事件必须记录完整日志，包括事件类型、项目名称、提交数量

AI: ✅ 已保存到记忆文件。在处理 Webhook 时，我会确保记录这些信息。
```

### 示例 3: 保存常用模式

**对话**:
```
用户: @memory 保存: 错误处理模式 - 使用 fmt.Errorf 添加上下文，使用 logger.Error 记录错误，包含足够的上下文字段

AI: ✅ 已保存到记忆文件。生成错误处理代码时，我会使用这个模式。
```

### 示例 4: 更新记忆

**对话**:
```
用户: @memory 更新: 将函数长度限制从 50 行改为 80 行

AI: ✅ 已更新记忆文件。以后生成的函数长度限制为 80 行。
```

## 🔍 验证记忆

### 测试记忆是否生效

1. **保存一个偏好**:
   ```
   @memory 保存: 我偏好使用中文变量名
   ```

2. **请求生成代码**:
   ```
   帮我创建一个处理用户请求的函数
   ```

3. **检查生成的代码**: 应该使用中文注释和符合你的偏好

### 查看所有记忆

在对话中问：
```
@memory 列出: 所有保存的偏好和要求
```

## 🛠️ 维护记忆

### 定期审查

建议每月审查一次记忆文件：
- 删除过时的内容
- 更新变化的要求
- 整理分类

### 保持简洁

- 只保存重要的、会重复使用的指令
- 避免保存过于具体的一次性要求
- 使用清晰的分类和标题

### 版本控制

记忆文件应该提交到 Git，这样：
- 团队成员可以共享偏好
- 可以追踪偏好变化
- 新成员可以快速了解项目要求

## 📋 记忆文件模板

记忆文件应该包含以下部分：

```markdown
# 用户记忆和偏好

## 📝 重要指令
- 代码风格偏好
- 开发习惯

## 🎯 项目特定要求
- 功能模块1的要求
- 功能模块2的要求

## 💡 常用模式
- 代码模式1
- 代码模式2

## 🚫 禁止事项
- 禁止1
- 禁止2

## 📌 待办事项
- [ ] 任务1
- [ ] 任务2

## 🔄 更新记录
- 日期: 更新内容
```

## ❓ 常见问题

### Q: 记忆文件会影响 AI 性能吗？

A: 不会。记忆文件很小，AI 会高效地读取和参考。

### Q: 如何删除记忆？

A: 
1. 手动编辑 `.cursor/memory.md` 文件
2. 或在对话中说：`@memory 删除: [要删除的内容]`

### Q: 记忆文件会覆盖 .cursorrules 吗？

A: 不会完全覆盖。记忆文件中的内容优先于通用规则，但两者是互补的。

### Q: 团队成员如何共享记忆？

A: 将 `.cursor/memory.md` 提交到 Git，团队成员拉取后即可共享。

### Q: 如何备份记忆？

A: 记忆文件在 Git 中，本身就是备份。也可以手动复制 `.cursor/memory.md` 文件。

---

**提示**: 记忆系统是为了让 AI 更好地理解你的偏好。保持记忆文件简洁和最新是最重要的！

