# 历史对话回顾指南

这个文件指导 AI 如何回顾和使用历史有效对话。

## 📖 回顾流程

### 每次对话开始时

1. **打开文件**: 读取 `.cursor/conversations.md`
2. **快速浏览**: 了解最近 10-20 条对话记录
3. **提取关键信息**:
   - 用户的代码风格偏好
   - 项目特定要求
   - 开发习惯
   - 常用模式
   - 禁止事项
4. **应用到当前对话**: 在生成回复时参考这些信息

### 关键信息提取

从历史对话中提取：

#### 代码风格偏好
- 注释语言（中文/英文）
- 命名风格
- 代码格式偏好
- 函数长度限制

#### 开发习惯
- 测试优先/实现优先
- 代码审查关注点
- Git 提交习惯
- 调试方式

#### 项目特定要求
- 业务规则
- 技术决策
- 架构约束
- 性能要求

#### 常用模式
- 错误处理模式
- 日志记录模式
- 测试模式
- API 设计模式

## 🔍 回顾技巧

### 1. 时间顺序

从最新到最旧浏览，优先关注最近的对话。

### 2. 主题分类

将历史对话按主题分类：
- 代码风格相关
- 项目要求相关
- 技术决策相关
- 开发习惯相关

### 3. 优先级

- **高优先级**: 最近 1 周的对话
- **中优先级**: 最近 1 个月的对话
- **低优先级**: 更早的对话（可能已过时）

### 4. 冲突处理

如果历史对话之间有冲突：
- 优先采用最新的对话
- 在回复中询问用户确认

## 💡 应用示例

### 示例 1: 代码风格

**历史对话**:
```
用户: [有效对话] 我偏好使用中文注释
AI: 已记录...
```

**当前对话**:
```
用户: 帮我创建一个处理函数
AI: [生成代码时，确保使用中文注释]
```

### 示例 2: 项目要求

**历史对话**:
```
用户: [有效对话] Webhook 处理必须记录完整日志
AI: 已记录...
```

**当前对话**:
```
用户: 添加新的 Webhook 事件处理
AI: [实现时，确保记录完整日志，包括事件类型、项目名称等]
```

## 📊 记忆更新

### 从历史对话更新记忆

定期将历史对话中的重要内容提取到 `.cursor/memory.md`：

1. **识别重要对话**: 标记为重要的、会重复使用的偏好
2. **提取关键信息**: 从对话中提取核心要求
3. **更新记忆文件**: 添加到 `.cursor/memory.md`
4. **归档对话**: 将已提取的对话标记为已处理

## 🛠️ 工具支持

### 快速回顾脚本

可以创建脚本快速查看最近的对话：

```bash
# 查看最近 5 条对话
tail -n 50 .cursor/conversations.md

# 搜索特定主题
grep -i "注释" .cursor/conversations.md
```

## ⚠️ 注意事项

1. **文件大小**: 如果文件过大，考虑归档旧对话
2. **隐私**: 确保敏感信息不被记录
3. **准确性**: 定期审查，删除过时或错误的信息
4. **备份**: 重要对话应该提交到 Git

---

**记住**: 历史对话是建立长久记忆的关键，要充分利用但也要定期维护。

