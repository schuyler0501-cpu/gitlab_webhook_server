# Cursor AI 配置说明

本项目已配置完善的 Cursor AI 开发环境，包含以下配置文件：

## 📁 配置文件说明

### `.cursorrules`
**最重要的配置文件**，定义了项目的编码规范、架构模式、最佳实践等。Cursor AI 会读取这个文件来理解项目规范。

**包含内容**:
- 项目概述和技术栈
- 代码风格和命名规范
- 架构模式和分层设计
- 错误处理和日志规范
- 测试要求
- Git 提交规范
- AI 协作指南

### `.cursorignore`
定义哪些文件/目录不应该被 Cursor AI 索引，提高 AI 的响应速度和准确性。

### `.cursor/context.md`
项目上下文文档，帮助 AI 理解：
- 项目背景和业务逻辑
- 核心业务流程
- 技术决策原因
- 待实现功能
- 常见问题解答

### `.cursor/instructions.md`
给 Cursor AI 的特定指令，包括：
- 代码生成规则
- 代码审查重点
- 常见任务模板
- 代码风格示例

### `.cursor/prompts.md`
常用提示词模板，包含：
- 功能开发模板
- 代码重构模板
- 测试模板
- 调试模板

### `.cursor/memory.md` ⭐ **重要**
**用户记忆文件**，保存用户的重要指令、偏好和项目特定要求。AI 在每次对话时都会参考这个文件。

**包含内容**:
- 代码风格偏好
- 开发习惯
- 项目特定要求
- 常用代码模式
- 禁止事项
- 待办事项

**如何使用**:
- 在对话中使用 `@memory 保存: [内容]` 保存新记忆
- 使用 `@memory 查看: [查询]` 查看记忆
- 直接编辑 `.cursor/memory.md` 文件

详见 [记忆系统使用指南](./.cursor/memory_guide.md)

## 🚀 如何使用

### 1. 启用 Vibe Coding

在 VS Code/Cursor 设置中确保启用了 Vibe Coding：
- 设置 → Cursor → General → Enable Vibe Coding

### 2. 配置记忆系统 ⭐

**重要**: 首先配置你的偏好和指令，让 AI 记住你的要求：

1. **查看记忆文件**: 打开 `.cursor/memory.md`
2. **添加你的偏好**: 编辑文件或使用 `@memory 保存:` 命令
3. **参考指南**: 查看 [记忆系统使用指南](./.cursor/memory_guide.md)

### 3. 与 AI 对话

现在你可以直接与 AI 对话，AI 会自动：
- 遵循 `.cursorrules` 中定义的规范
- **参考 `.cursor/memory.md` 中的你的偏好** ⭐

**示例对话**:
```
用户: 帮我添加一个查询提交记录的 API 端点

AI: 会根据 .cursorrules 中的规范和 .cursor/memory.md 中的你的偏好，
    在正确的目录创建文件，遵循命名规范，添加错误处理和日志记录等。
```

### 4. 保存有效对话

当有重要的指令需要记住时，使用记忆命令：

```
@memory 保存: 我偏好使用中文注释，所有公开函数必须有中文注释
@memory 查看: 我的代码风格偏好
@memory 更新: 将函数长度限制改为 80 行
```

详见 [如何保存有效对话](./.cursor/save_memory.md)

### 3. 使用提示词模板

参考 `.cursor/prompts.md` 中的模板，可以更高效地与 AI 协作。

## 📝 自定义规则

如果需要修改项目规范，编辑 `.cursorrules` 文件：

1. **添加新的规范**: 在相应章节添加规则
2. **修改现有规范**: 直接修改对应内容
3. **添加禁止事项**: 在"禁止事项"章节添加

修改后，AI 会自动遵循新的规范。

## 🔍 验证配置

### 检查 AI 是否遵循规范

尝试以下测试：

1. **命名规范测试**:
   ```
   帮我创建一个新的处理器来处理统计请求
   ```
   检查生成的文件名和类型名是否符合规范。

2. **架构模式测试**:
   ```
   添加一个保存提交记录到数据库的功能
   ```
   检查是否遵循 Handler → Service → Repository 的分层架构。

3. **错误处理测试**:
   ```
   实现一个可能出错的函数
   ```
   检查是否包含完善的错误处理。

## 💡 最佳实践

### 1. 提供清晰的需求

✅ **好的提示**:
```
在 internal/service/commit/commit_service.go 中添加一个方法，
根据作者邮箱和时间范围查询提交记录，返回统计信息。
需要包含错误处理和日志记录。
```

❌ **不好的提示**:
```
帮我写个查询功能
```

### 2. 引用现有代码

✅ **好的提示**:
```
参考 internal/service/webhook_service.go 中的 handlePushEvent 方法，
在 commit_service.go 中添加类似的错误处理逻辑。
```

### 3. 分步骤实现

✅ **好的提示**:
```
第一步：在 internal/model/ 中定义统计结果的数据模型
第二步：在 internal/service/commit/ 中实现查询方法
第三步：在 internal/handler/ 中创建 API 端点
```

## 🛠️ 维护配置

### 更新规则

当项目规范发生变化时：

1. 更新 `.cursorrules` 文件
2. 更新 `.cursor/context.md`（如果有架构变化）
3. 更新 `.cursor/instructions.md`（如果有新的指令）

### 团队协作

如果团队成员都使用 Cursor：

1. 将 `.cursorrules` 等文件提交到 Git
2. 团队成员拉取代码后，AI 会自动遵循项目规范
3. 统一的规范确保代码风格一致

## 📚 相关文档

- [开发规范](./docs/DEVELOPMENT.md) - 详细的开发规范
- [AI 辅助开发指南](./docs/AI_CODING_GUIDE.md) - AI 协作最佳实践
- [快速启动指南](./QUICKSTART.md) - 项目快速上手

## ❓ 常见问题

### Q: AI 没有遵循规范怎么办？

A: 
1. 检查 `.cursorrules` 文件是否存在且格式正确
2. 确保 Vibe Coding 已启用
3. 在对话中明确提醒 AI 遵循规范

### Q: 如何添加项目特定的规则？

A: 编辑 `.cursorrules` 文件，在相应章节添加规则。例如，如果项目有特殊的命名约定，在"命名约定"章节添加。

### Q: 规则太多会影响 AI 性能吗？

A: 不会。`.cursorrules` 文件会被高效解析，不会影响 AI 的响应速度。但建议保持规则简洁明了。

---

**提示**: 定期审查和更新 `.cursorrules`，确保规则与项目实际需求保持一致。

